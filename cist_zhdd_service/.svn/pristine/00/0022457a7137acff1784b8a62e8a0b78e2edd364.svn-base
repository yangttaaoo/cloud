<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cist.eventmanagement.mapper.EventManagementMapper">
	<!-- 查询事件详细信息 -->
	<select id="queryeventinfo" resultType="com.cist.eventmanagement.model.VW_EVENT_INFO"
		parameterType="java.util.HashMap">
		select * from vw_event_info order by pk_id
	</select>
	<!-- 删除事件 -->
	<delete id="deleteeventinfo" parameterType="java.util.HashMap">
		delete from ZHDD_EVENT_INFORMATION where event_status!='2' and pk_id in
		 <foreach item="w" collection="list" open="(" separator="," close=")">
		       #{w}
		 </foreach> 
	</delete>
	<!-- 更新事件(作废、归档)-->
	<update id="updateeventinfo" parameterType="java.util.HashMap">
		update ZHDD_EVENT_INFORMATION 
		<trim prefix="set" suffixOverrides=",">
			<if test="event_status!=null">event_status = #{event_status,jdbcType=VARCHAR},</if>
			<!-- <if test="hpzl!=null">hpzl = #{hpzl,jdbcType=CHAR},</if>
			<if test="hpys!=null">hpys = #{hpys,jdbcType=CHAR},</if>
			<if test="wfxw!=null">wfxw = #{wfxw,jdbcType=VARCHAR},</if>
			<if test="shbz!=null">shbz = #{shbz,jdbcType=INTEGER},</if>
			<if test="csr!=null">csr = #{csr,jdbcType=VARCHAR},</if>
			<if test="cszfbz!=null">cszfbz=#{cszfbz,jdbcType=VARCHAR},</if>
			<if test="shbj!=null">cssj=sysdate,</if>
			<if test="shbj==null">scsj=sysdate,</if> -->
		</trim>
		where pk_id = #{pk_id,jdbcType=INTEGER}
	</update>
</mapper>